//
//  PrivacyPolicyView.swift
//  At00
//
//  プライバシーポリシー表示画面
//

import SwiftUI

struct PrivacyPolicyView: View {
    @Environment(\.dismiss) private var dismiss
    
    private let privacyPolicyText = """
# プライバシーポリシー

最終更新日: 2024年12月

## 1. はじめに

とびとびアプリ（以下「本アプリ」）は、大学生の授業出席管理を支援するアプリケーションです。本プライバシーポリシーは、本アプリがどのような情報を収集し、どのように使用するかについて説明します。

## 2. 収集する情報

### 2.1 ユーザーが入力する情報
- 授業情報（授業名、時間割、教室等）
- 出席記録（欠席、遅刻、早退、公欠の記録）
- 学期情報（学期名、開始・終了日）
- アプリ設定情報

### 2.2 自動的に収集する情報
本アプリは以下の情報をデバイス内で管理します：
- 通知設定の状態
- アプリ内の設定情報

## 3. 情報の使用目的

収集した情報は以下の目的で使用されます：
- 授業の出席状況管理
- 欠席回数の計算と表示
- 統計情報の生成
- リマインダー通知の送信
- アプリの機能向上

## 4. 情報の保存と管理

### 4.1 データの保存場所
- **すべてのデータは、お使いのデバイス内にのみ保存されます**
- サーバーへのデータ送信は一切行いません
- アプリ自体はiCloud同期機能を持ちません（iOSのバックアップ機能には含まれる場合があります）

### 4.2 データの安全性
- データは iOS の標準的なセキュリティ機能により保護されます
- デバイスのパスコード/Face ID/Touch ID によりアクセスが制限されます

## 5. 第三者への情報提供

本アプリは、以下の場合を除いて、お客様の個人情報を第三者に提供することはありません：
- お客様の明示的な同意がある場合
- 法令により開示が求められる場合

## 6. 通知機能について

本アプリでは、以下の目的で通知機能を使用します：
- 定期リマインダー（出席記録の入力を促す通知）
- 欠席回数上限の警告
- 授業開始前の通知

通知機能は設定により無効にすることができます。

## 7. データの削除

### 7.1 個別削除
- 授業情報、出席記録は個別に削除可能です
- 削除されたデータは復旧できません

### 7.2 全データ削除
- 設定画面から全データを削除できます
- アプリをデバイスから削除することで全データが削除されます

## 8. 年齢制限

本アプリは13歳以上のユーザーを対象としています。13歳未満の方は保護者の同意を得てご利用ください。

## 9. プライバシーポリシーの変更

本プライバシーポリシーは、法令の変更やサービスの変更に伴い更新される場合があります。重要な変更がある場合は、アプリ内で通知いたします。

## 10. お問い合わせ

本プライバシーポリシーに関するご質問は、App Store のアプリページからお問い合わせください。

---

**重要**: 本アプリはすべてのデータをデバイス内に保存し、外部への送信は一切行いません。あなたのプライバシーは完全に保護されます。
"""
    
    var body: some View {
        NavigationView {
            ScrollView {
                VStack(alignment: .leading, spacing: 0) {
                    Text(.init(privacyPolicyText))
                        .font(.system(.body, design: .default))
                        .lineSpacing(2)
                        .padding()
                }
            }
            .navigationTitle("プライバシーポリシー")
            .navigationBarTitleDisplayMode(.inline)
            .toolbar {
                ToolbarItem(placement: .navigationBarTrailing) {
                    Button("閉じる") {
                        dismiss()
                    }
                }
            }
        }
        .navigationViewStyle(StackNavigationViewStyle())
    }
}

#Preview {
    PrivacyPolicyView()
}